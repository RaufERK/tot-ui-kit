import { useEffect as v } from "react";
function E(i) {
  let t = i;
  for (; t && t !== document.documentElement; ) {
    const e = getComputedStyle(t).overflowY;
    if (/(auto|scroll|overlay)/.test(e) && t.scrollHeight > t.clientHeight) return t;
    t = t.parentElement;
  }
  return window;
}
function L(i, t, c = !0) {
  v(() => {
    const e = i.current;
    if (!e) return;
    const u = t === "top" ? "--r-top" : "--r-bottom";
    if (!c) {
      e.style.removeProperty(u), delete e.dataset.stuck;
      return;
    }
    const p = 24;
    let d = 0, r = 0, s = window, l = null;
    const m = () => {
      r = 0;
      const o = e.getBoundingClientRect(), n = s === window ? { top: 0, bottom: window.innerHeight } : s.getBoundingClientRect(), g = t === "top" ? o.top - (n.top + d) : n.bottom - d - o.bottom, f = Math.max(0, Math.min(p, g));
      e.style.setProperty(u, `${f}px`), f <= 0.5 ? e.dataset.stuck = "true" : delete e.dataset.stuck;
    }, a = () => {
      r || (r = requestAnimationFrame(m));
    }, y = () => {
      const o = getComputedStyle(e), n = t === "top" ? o.top : o.bottom;
      d = parseFloat(n || "0") || 0, s = E(e), l = s === window ? window : s, m(), l.addEventListener("scroll", a, { passive: !0 }), window.addEventListener("resize", a), window.addEventListener("transitionend", w);
    }, w = (o) => {
      o.target && o.target instanceof HTMLElement && o.target.classList && o.propertyName === "transform" && Array.from(o.target.classList).some(
        (n) => n.includes("lightBoxSideOverlayContent")
      ) && m();
    };
    return y(), () => {
      l && l.removeEventListener("scroll", a), window.removeEventListener("resize", a), window.removeEventListener("transitionend", w), r && cancelAnimationFrame(r);
    };
  }, [i, t, c]);
}
export {
  L as useStickyCornerRadius
};
//# sourceMappingURL=useStickyCornerRadius.js.map
